<view class="container">
  <view class="logo-container">
    <image class="logo" src="/images/logo.png" mode="aspectFit"></image>
    <text class="app-name">EGO</text>
  </view>
  
  <view class="welcome-text">
    <text class="title">创建你的角色</text>
    <text class="subtitle">开启你的社交之旅</text>
  </view>

  <!-- 步骤指示器 -->
  <view class="steps">
    <view class="step {{currentStep >= 1 ? 'active' : ''}}">1</view>
    <view class="step-line {{currentStep >= 2 ? 'active' : ''}}"></view>
    <view class="step {{currentStep >= 2 ? 'active' : ''}}">2</view>
    <view class="step-line {{currentStep >= 3 ? 'active' : ''}}"></view>
    <view class="step {{currentStep >= 3 ? 'active' : ''}}">3</view>
  </view>

  <view class="form-container">
    <!-- 步骤1：性别选择 -->
    <view class="step-content" hidden="{{currentStep !== 1}}">
      <view class="step-title">选择你的性别</view>
      <view class="gender-options">
        <view class="gender-option {{gender === 'male' ? 'selected' : ''}}" bindtap="onGenderSelect" data-gender="male">
          <image class="gender-icon" src="/images/male.png" mode="aspectFit"></image>
          <text>男生</text>
        </view>
        <view class="gender-option {{gender === 'female' ? 'selected' : ''}}" bindtap="onGenderSelect" data-gender="female">
          <image class="gender-icon" src="/images/female.png" mode="aspectFit"></image>
          <text>女生</text>
        </view>
      </view>
    </view>

    <!-- 步骤2：基本信息 -->
    <view class="step-content" hidden="{{currentStep !== 2}}">
      <view class="step-title">完善基本信息</view>
      
      <!-- 头像上传 -->
      <view class="avatar-section">
        <image class="avatar" src="{{avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
        <button class="upload-btn" bindtap="chooseAvatar">上传头像</button>
      </view>
      
      <view class="input-section">
        <text class="label">昵称</text>
        <view class="input-group">
          <input class="input" type="text" placeholder="请输入昵称" value="{{nickname}}" bindinput="onNicknameInput"/>
          <button class="random-btn" bindtap="generateRandomNickname">随机生成</button>
        </view>
      </view>
      <view class="input-section">
        <text class="label">年龄</text>
        <view class="input-group">
          <input class="input" type="number" placeholder="请输入年龄" value="{{age}}" bindinput="onAgeInput"/>
        </view>
      </view>
    </view>

    <!-- 步骤3：个人标签 -->
    <view class="step-content" hidden="{{currentStep !== 3}}">
      <view class="step-title">选择你的标签</view>
      <view class="input-section">
        <text class="label">MBTI性格</text>
        <view class="mbti-options">
          <label class="radio-label" wx:for="{{mbtiOptions}}" wx:key="value">
            <radio value="{{item.value}}" checked="{{mbti === item.value}}" bindtap="onMbtiSelect" data-mbti="{{item.value}}"/>
            {{item.label}}
          </label>
        </view>
      </view>
      <view class="input-section">
        <text class="label">个人特质</text>
        <view class="traits-container">
          <view class="traits-list">
            <view class="trait-tag {{item.selected ? 'selected' : ''}}" 
                  wx:for="{{traits}}" 
                  wx:key="value"
                  bindtap="toggleTrait"
                  data-index="{{index}}">
              {{item.label}}
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <view class="button-group">
    <button class="prev-btn" bindtap="prevStep" wx:if="{{currentStep > 1}}">上一步</button>
    <button class="next-btn" bindtap="nextStep" wx:if="{{currentStep < 3}}">下一步</button>
    <button class="submit-btn" bindtap="handleSubmit" wx:if="{{currentStep === 3}}">开始体验</button>
  </view>
</view> 